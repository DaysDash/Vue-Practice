(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73c147a5"],{"159b":function(t,i,s){var e=s("da84"),o=s("fdbc"),n=s("17c2"),r=s("9112");for(var a in o){var c=e[a],d=c&&c.prototype;if(d&&d.forEach!==n)try{r(d,"forEach",n)}catch(u){d.forEach=n}}},"17c2":function(t,i,s){"use strict";var e=s("b727").forEach,o=s("a640"),n=s("ae40"),r=o("forEach"),a=n("forEach");t.exports=r&&a?[].forEach:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}},"3ca3":function(t,i,s){"use strict";var e=s("6547").charAt,o=s("69f3"),n=s("7dd0"),r="String Iterator",a=o.set,c=o.getterFor(r);n(String,"String",(function(t){a(this,{type:r,string:String(t),index:0})}),(function(){var t,i=c(this),s=i.string,o=i.index;return o>=s.length?{value:void 0,done:!0}:(t=e(s,o),i.index+=t.length,{value:t,done:!1})}))},4160:function(t,i,s){"use strict";var e=s("23e7"),o=s("17c2");e({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},"4df4":function(t,i,s){"use strict";var e=s("0366"),o=s("7b0b"),n=s("9bdd"),r=s("e95a"),a=s("50c4"),c=s("8418"),d=s("35a1");t.exports=function(t){var i,s,u,l,f,v,h=o(t),m="function"==typeof this?this:Array,C=arguments.length,g=C>1?arguments[1]:void 0,_=void 0!==g,p=d(h),b=0;if(_&&(g=e(g,C>2?arguments[2]:void 0,2)),void 0==p||m==Array&&r(p))for(i=a(h.length),s=new m(i);i>b;b++)v=_?g(h[b],b):h[b],c(s,b,v);else for(l=p.call(h),f=l.next,s=new m;!(u=f.call(l)).done;b++)v=_?n(l,g,[u.value,b],!0):u.value,c(s,b,v);return s.length=b,s}},6547:function(t,i,s){var e=s("a691"),o=s("1d80"),n=function(t){return function(i,s){var n,r,a=String(o(i)),c=e(s),d=a.length;return c<0||c>=d?t?"":void 0:(n=a.charCodeAt(c),n<55296||n>56319||c+1===d||(r=a.charCodeAt(c+1))<56320||r>57343?t?a.charAt(c):n:t?a.slice(c,c+2):r-56320+(n-55296<<10)+65536)}};t.exports={codeAt:n(!1),charAt:n(!0)}},"6cd7":function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"goods"},[s("div",{staticClass:"sort"},t._l(t.goods,(function(i,e){return s("div",{key:i.name,staticClass:"sortType",class:{active:t.isActive===i.name},on:{click:function(i){return t.gotoSort(e)}}},[t._v(" "+t._s(i.name)+" "),0!=t.sum(t.sortArray[e])?s("div",{staticClass:"messageAlert"},[t._v(" "+t._s(t.sum(t.sortArray[e]))+" ")]):t._e()])})),0),s("div",{staticClass:"content",attrs:{id:"content"}},[t._l(t.goods,(function(i,e){return s("div",{key:i.name},[s("div",{staticClass:"sortName",attrs:{id:i.name,index:e}},[t._v(" "+t._s(i.name)+" ")]),t._l(i.foods,(function(o,n){return s("div",{key:o.name,staticClass:"foodInfo"},[s("div",{staticClass:"img"},[s("img",{attrs:{src:o.icon}})]),s("div",{staticClass:"else"},[s("div",{staticClass:"foodName"},[t._v(t._s(o.name))]),s("div",{staticClass:"m"},[t._v("主要原料: "+t._s(o.info))]),s("div",{staticClass:"sellCount"},[t._v("月售: "+t._s(o.sellCount))]),s("div",{staticClass:"price"},[s("div",[t._v("¥"+t._s(o.price))]),s("div",{staticClass:"buttonGroup"},[s("transition",{attrs:{name:"slide"}},[0!=t.sortArray[e][n]?s("div",{staticClass:"deletegroup"},[s("div",{staticClass:"cart-button delete-button",on:{click:function(s){return t.deleteCart(o.name,i.name)}}},[t._v(" - ")]),s("div",{staticClass:"cart-number"},[t._v(" "+t._s(t.sortArray[e][n])+" ")])]):t._e()]),s("div",{staticClass:"cart-button",on:{click:function(s){return t.addCart(o.name,i.name)}}},[t._v(" + ")])],1)])])])}))],2)})),s("div",{staticClass:"blank"})],2),t.showCart&&t.totalFood>0?s("div",{staticClass:"cart-detail",on:{touchmove:function(t){t.preventDefault()}}},[s("div",{staticClass:"detail-title"},[s("div",[t._v("已选商品")]),s("div",{on:{click:t.clearCart}},[t._v("清空")])]),s("div",{staticClass:"detail-content"},[t._l(t.sortArray,(function(i,e){return[t._l(i,(function(i,o){return[i>0?s("div",{key:10*e+o,staticClass:"detail-info"},[s("div",{staticClass:"detail-icon"},[s("img",{attrs:{src:t.goods[e].foods[o].icon}})]),s("div",{staticClass:"cart-info"},[s("div",[t._v(t._s(t.goods[e].foods[o].name))]),s("div",{staticClass:"price"},[s("div",{staticStyle:{color:"red"}},[t._v(" ¥"+t._s(t.goods[e].foods[o].price)+" ")]),s("div",{staticClass:"buttonGroup"},[s("div",{staticClass:"cart-button delete-button",on:{click:function(i){return t.deleteCart(t.goods[e].foods[o].name,t.goods[e].name)}}},[t._v(" - ")]),s("div",{staticClass:"detail-number"},[t._v(t._s(i))]),s("div",{staticClass:"cart-button",on:{click:function(i){return t.addCart(t.goods[e].foods[o].name,t.goods[e].name)}}},[t._v(" + ")])])])])]):t._e()]}))]}))],2)]):t._e(),t.showCart&&t.totalFood>0?s("div",{staticClass:"mask",on:{click:function(i){return t.test()},touchstart:function(i){return t.test()}}}):t._e(),s("div",{staticClass:"cart",on:{click:function(i){return t.test()},touchmove:function(t){t.preventDefault()}}},[s("div",{staticClass:"cart-icon"},[s("i",{staticClass:"iconfont icon-gouwuche",staticStyle:{"font-size":"1.5em"}}),0!=t.totalFood?s("div",{staticClass:"messageAlert"},[t._v(t._s(t.totalFood))]):t._e()]),s("div",[0===t.totalFood?s("div",[t._v("未选购商品")]):s("div",{staticClass:"totalPrice"},[t._v("¥"+t._s(t.totalPrice))]),s("div",{staticClass:"deliverPrice"},[t._v("另需配送费¥"+t._s(t.shop.deliveryPrice))])]),s("div",{staticClass:"confirm",class:t.isEnough},[t._v(" "+t._s(t.minPrice)+" ")])])])},o=[],n=(s("4160"),s("a630"),s("c975"),s("b0c0"),s("b64b"),s("3ca3"),s("159b"),s("1725")),r={data:function(){return{isActive:"",observer:"",cartList:{},sortArray:[],showCart:!1,content:"",sortElements:""}},computed:{shop:function(){return n.info},goods:function(){return n.goods},totalFood:function(){var t=this,i=0;return this.sortArray.forEach((function(s){i+=t.sum(s)})),i},totalPrice:function(){var t=this,i=0;return this.sortArray.forEach((function(s,e){s.forEach((function(s,o){i+=t.goods[e].foods[o].price*s}))})),i},minPrice:function(){var t=this.shop.minPrice-this.totalPrice;return 0===this.totalFood?"￥".concat(this.shop.minPrice,"起送"):t>0?"差￥".concat(t,"起送"):"去结算"},isEnough:function(){return{enough:"去结算"===this.minPrice}}},methods:{test:function(){this.showCart=!this.showCart},gotoSort:function(t){this.content.scrollTo(0,0),this.sortElements[t].scrollIntoView(),this.isActive=this.goods[t].name},sum:function(t){var i=0;return t.forEach((function(t){i+=t})),i},initData:function(){var t=this;this.cartList=this.$store.state.cartList[this.$route.params.id]||{},this.goods.forEach((function(i,s){var e=Object.keys(t.cartList).indexOf(i.name),o=[];i.foods.forEach((function(s,n){-1!=e&&-1!=Object.keys(t.cartList[i.name]).indexOf(s.name)?o[n]=t.cartList[i.name][s.name]:o[n]=0})),t.$set(t.sortArray,s,o)}))},addCart:function(t,i){this.$store.commit("cartAddFood",{id:this.$route.params.id,food:t,sort:i}),this.initData()},deleteCart:function(t,i){this.$store.commit("cartDeleteFood",{id:this.$route.params.id,food:t,sort:i}),this.initData()},clearCart:function(){this.$store.commit("clearCart",this.$route.params.id),this.initData()}},beforeMount:function(){this.initData()},mounted:function(){var t=this;this.content=document.getElementById("content"),this.sortElements=document.getElementsByClassName("sortName"),this.observer=new IntersectionObserver((function(i){i.forEach((function(i){if(!0===i.isIntersecting){var s=parseInt(i.target.getAttribute("index"));t.isActive=t.goods[s].name}}))}),{threshold:[0],root:document.getElementById("content"),rootMargin:"0px 0px -99% 0px"}),Array.from(document.getElementsByClassName("sortName")).forEach((function(i){t.observer.observe(i)}))},watch:{totalFood:function(){0===this.totalFood&&(this.showCart=!1)}},beforeDestroy:function(){this.observer.disconnect()}},a=r,c=(s("918e"),s("2877")),d=Object(c["a"])(a,e,o,!1,null,"3960e7bc",null);i["default"]=d.exports},"71ea":function(t,i,s){},"918e":function(t,i,s){"use strict";var e=s("71ea"),o=s.n(e);o.a},a630:function(t,i,s){var e=s("23e7"),o=s("4df4"),n=s("1c7e"),r=!n((function(t){Array.from(t)}));e({target:"Array",stat:!0,forced:r},{from:o})},b0c0:function(t,i,s){var e=s("83ab"),o=s("9bf2").f,n=Function.prototype,r=n.toString,a=/^\s*function ([^ (]*)/,c="name";e&&!(c in n)&&o(n,c,{configurable:!0,get:function(){try{return r.call(this).match(a)[1]}catch(t){return""}}})},b727:function(t,i,s){var e=s("0366"),o=s("44ad"),n=s("7b0b"),r=s("50c4"),a=s("65f0"),c=[].push,d=function(t){var i=1==t,s=2==t,d=3==t,u=4==t,l=6==t,f=5==t||l;return function(v,h,m,C){for(var g,_,p=n(v),b=o(p),y=e(h,m,3),L=r(b.length),A=0,E=C||a,S=i?E(v,L):s?E(v,0):void 0;L>A;A++)if((f||A in b)&&(g=b[A],_=y(g,A,p),t))if(i)S[A]=_;else if(_)switch(t){case 3:return!0;case 5:return g;case 6:return A;case 2:c.call(S,g)}else if(u)return!1;return l?-1:d||u?u:S}};t.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6)}},fdbc:function(t,i){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);